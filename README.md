FCD2VANET converter allows to get dynamic graph from SUMO output.

1. Generate FCD output from SUMO

Run SUMO simulation with your network and generate output file with floating car data: vTypeProbe. 

An example of SUMO setting is available in folder: 
sumo/Luxembourg_scenario/ 

The scenario was tested with SUMO 0.17.1 (May 3rd, 2013 release).

Files:
- scenario.sumocfg - a config file that sets input files, output files and the simulation time 
- additional.add.xml - an additional configuration file specifying vTypeProbe output files.
- Luxembourg.net.xml - network of Luxembourg country.
- Luxembourg.rou.xml - vehicular traces for Luxembourg country generated by VehiLux. Traces cover the whole country and half of a day from midnight till noon.

Be aware that a long simulation of a large network with many vehicles can output a huge xml file!

Example:
sumo -c scenario.sumocfg sumo/Luxembourg/scenario.sumocfg

As an ouput you should get 3 floating car data (fcd) files for different probe frequences 
- 1 second: fcd1.xml
- 10 seconds: fcd10.xml
- 60 seconds: fcd60.xml

2. Chunk your original fcd.xml file to get a smaller fcd.xml file for a specified time period and a step size.

Be aware that in the begining of simulation the network is empty. If you want to evaluate network in of a 'normal' state, you should skip the time that SUMO needs for populating the network with vehicles.

Examle:
python /scripts/fcd_chunk.py -fcdFile data/Luxembourg/fcd.xml --chunkOutput data/Luxembourg/chunkFCD.xml --startTime 21630 --endTime 21641 --stepSize 1

3. Export the fcd.xml file to NS3 mobility file (.tlc) using a traceExporter SUMO tool:

python [sumo-path]/tools/bin/traceExporter.py --fcd-input data/Luxembourg/chunkFCD.xml --ns2config-output /Users/agatagrzybek/PhD/workshop/graphs/LuxembourgTraces/FCD/config.tcl --ns2activity-output /Users/agatagrzybek/PhD/workshop/graphs/LuxembourgTraces/FCD/activity.tcl --ns2mobility-output /Users/agatagrzybek/PhD/workshop/graphs/LuxembourgTraces/FCD/mobility.tcl --penetration 1 --begin 21630 --end 21641

4. Run ns3 application ns2-mobility-trace to create VANET with nodes moving every step as indicated in fcd file and using DSRC 802.11p wifi standard.

./waf --run "scratch/ns2-mobility-trace --traceFile=data/Luxembourg/mobility.tcl --duration=11 --logFile=data/Luxembourg/main-ns2-mob.log"

Output file out.txt contains list of nodes and its neighbours every time step

5. Convert to a dynamic graph format

- GraphSteam .dgs 
vanet2dgs.py


